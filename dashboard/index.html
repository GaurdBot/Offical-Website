<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GuardBot - Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="GuardBot.png" type="image/png" sizes="32x32">
</head>
<body>
    <nav>
        <div class="logo">
            <h1>GuardBot</h1>
        </div>
        <ul class="nav-links">
            <li><a href="https://discord.gg/Xsbj4HwfVq">Support Server</a></li>
            <li><a href="https://discord.com/oauth2/authorize?client_id=1290735211742629898&permissions=8&integration_type=0&scope=bot+applications.commands">Invite Me</a></li>
            <li><a href="https://gaurdbot.github.io/Offical-Website/home</li>
        </ul>
        <div id="loginContainer" style="margin-left:auto;">
            <img id="userAvatar" src="" alt="Profile Pic" style="width:40px; height:40px; border-radius:50%; cursor:pointer;" /> 
            <div class="profile-menu" id="profileMenu" style="display: inline;">
                <div class="dropdown-content">
                    <a href="https://gaurdbot.github.io/Offical-Website/dashboard" id="dashboardLink">Dashboard</a>
                    <a href="https://gaurdbot.github.io/Offical-Website/panel" id="panelLink">Panel</a>
                </div>
            </div>
        </div>
    </nav>

    <header>
        <h1>Your Dashboard</h1>
        <p>Manage your GuardBot settings and monitor server activity.</p>
    </header>

    <section class="dashboard-content">
        <h2>Servers</h2>
        <div class="servers-list" id="serversList"></div>

        <h2>Server Statistics</h2>
        <div class="stats">
            <div class="stat-card">
                <h3>Total Members</h3>
                <p>150</p>
            </div>
            <div class="stat-card">
                <h3>Moderated Messages</h3>
                <p>1,200</p>
            </div>
            <div class="stat-card">
                <h3>Warnings Issued</h3>
                <p>50</p>
            </div>
        </div>
    </section>

    <!-- Server Settings Panel -->
    <div id="serverSettingsPanel" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSettingsPanel()">&times;</span>
            <h2 id="modalTitle">Server Settings</h2>
            <form id="serverSettingsForm">
                <div class="form-group">
                    <label for="spamDetection">Enable Auto Spam Detection</label>
                    <select id="spamDetection" name="spamDetection">
                        <option value="enabled">Enabled</option>
                        <option value="disabled">Disabled</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="autoModLevel">Auto Mod Level</label>
                    <select id="autoModLevel" name="autoModLevel">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
                <button type="submit" class="save-btn">Save Settings</button>
            </form>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 GuardBot. All rights reserved.</p>
    </footer>
    
    <script>
        const userSettings = {};
        const defaultLogo = "https://w7.pngwing.com/pngs/336/242/png-transparent-circle-discord-gaming-messenger-round-icon-popular-services-brands-vol-2-icon.png";

        // Simulated server data - replace with actual data fetched from the Discord API
        const servers = [
            { id: 1, name: "Server 1", logo: "https://example.com/server1logo.png" },
            { id: 2, name: "Server 2", logo: "" }, // No logo; should use default
            { id: 3, name: "Server 3", logo: "" }, // No logo; should use default
            { id: 4, name: "Server 4", logo: "https://example.com/server4logo.png" },
        ];

        // Function to render servers
        function renderServers() {
            const serversList = document.getElementById('serversList');
            servers.forEach(server => {
                const serverDiv = document.createElement('div');
                serverDiv.className = 'server';
                serverDiv.setAttribute('onclick', `openSettingsPanel(${server.id})`);

                const serverLogo = document.createElement('img');
                serverLogo.src = server.logo || defaultLogo; // Use default logo if not available

                const serverName = document.createElement('span');
                serverName.innerText = server.name;

                serverDiv.appendChild(serverLogo);
                serverDiv.appendChild(serverName);
                serversList.appendChild(serverDiv);
            });
        }

        function openSettingsPanel(serverId) {
            const panel = document.getElementById("serverSettingsPanel");
            document.getElementById("modalTitle").innerText = `Settings for Server ${serverId}`;
            document.getElementById("spamDetection").value = userSettings[serverId]?.spamDetection || 'disabled';
            document.getElementById("autoModLevel").value = userSettings[serverId]?.autoModLevel || 'low';
            panel.style.display = "block"; // Show panel
        }

        function closeSettingsPanel() {
            document.getElementById("serverSettingsPanel").style.display = "none";
        }

        // Handle form submission
        document.getElementById("serverSettingsForm").onsubmit = function(event) {
            event.preventDefault(); // Prevent form submission
            const serverId = parseInt(document.getElementById("modalTitle").innerText.split(" ")[3]); // Get server ID from title
            const spamDetection = document.getElementById("spamDetection").value;
            const autoModLevel = document.getElementById("autoModLevel").value;

            // Save settings for this server
            userSettings[serverId] = {
                spamDetection,
                autoModLevel,
            };

            alert(`Settings Saved for Server ${serverId}:\nSpam Detection: ${spamDetection}\nAuto Mod Level: ${autoModLevel}`);
            closeSettingsPanel(); // Close panel after saving
        };

        // Initialize the dashboard
        renderServers(); // Call this at the end of the script
    </script>
</body>
</html>
